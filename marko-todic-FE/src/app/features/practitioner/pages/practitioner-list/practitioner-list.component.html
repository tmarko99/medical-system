<div class="container">
  <h1>List of practitioners</h1>

  <div class="d-flex mb-4">
    <button class="btn btn-outline-warning mr-3" routerLink="">Home</button>
    <button class="btn btn-outline-info" routerLink="/practitioner/practitioner-add">Add Practitioner</button>
  </div>
</div>

<div class="container">
  <div class="d-flex flex-direction-column justify-content-between">
    <div class="form-check mt-2">
      <input class="form-check-input double" [(ngModel)]="unassigned" (change)="search()" type="checkbox" value="unassigned" id="unassigned">
      <label class="form-check-label" for="unassigned">Unassigned</label>
    </div>
    <div class="d-flex mb-4 col-lg-4">
      <input type="text" class="form-control" ngModel matInput placeholder="Search" name="search" search #searchInput="ngModel"
        [(ngModel)]="searchValue" (keyup)="search()">
    </div>
    <div class="d-flex justify-content-center col-lg-3 mb-4">
      <select class="custom-select" [(ngModel)]="genderValue" ngModel (change)="search()">
        <option value="">Any gender</option>
        <option *ngFor="let g of gender | keyvalue" [value]="g.key">
          {{ g.value }}
        </option>
      </select>
    </div>
    <div class="d-flex mb-4 justify-content-center col-lg-3">
      <select class="custom-select" [(ngModel)]="qualificationValue" ngModel (change)="search()">
        <option value="">Any qualification</option>
        <option *ngFor="let qualification of qualifications | keyvalue" [value]="qualification.key">
          {{ qualification.value }}
        </option>
      </select>
  </div>
</div>
</div>

<ng-container *ngIf="practitioners.length > 0; else noResults">
  <table class="table table-striped mx-auto col-lg-11 col-md-6">
    <thead>
    <tr>
      <th sortable="id" (sort)="onSort($event)" scope="col">Id</th>
      <th sortable="identifier" (sort)="onSort($event)" scope="col">Identifier</th>
      <th sortable="name" (sort)="onSort($event)" scope="col">Name</th>
      <th sortable="surname" (sort)="onSort($event)" scope="col">Surname</th>
      <th sortable="gender" (sort)="onSort($event)" scope="col">Gender</th>
      <th>Phone</th>
      <th>Email</th>
      <th sortable="qualification" (sort)="onSort($event)" scope="col">Qualification</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let practitioner of practitioners">
      <td>{{ practitioner.id }}</td>
      <td>{{ practitioner.identifier }}</td>
      <td>{{ practitioner.name }}</td>
      <td>{{ practitioner.surname }}</td>
      <td>
        <span [ngClass]="getBadgeColor( practitioner.gender)">{{ practitioner.gender }}</span>
      </td>
      <td>{{ practitioner.phone }}</td>
      <td>{{ practitioner.email }}</td>
      <td>{{ practitioner.qualification }}</td>
      <td>
        <button [routerLink]="['/practitioner/practitioner-details/', practitioner.id]" class="btn btn-outline-warning mr-3">View</button>
        <button [routerLink]="['/practitioner/practitioner-edit/', practitioner.id]" class="btn btn-outline-success mr-3">Edit</button>
        <button class="btn btn-outline-danger" (click)="onDeleteClick(practitioner)">Delete</button>
      </td>
    </tr>
    </tbody>
  </table>
</ng-container>

<div class="d-flex justify-content-center align-items-start">
  <select class="custom-select col-1 mx-2" (change)="onPageSizeChange()" [(ngModel)]="pageSize" >
    <option *ngFor="let size of availablePageSize" [ngValue]="size">{{size}}</option>
  </select>
  <div class="d-flex justify-content-center">
    <ngb-pagination
      [(page)]="currentPage"
      [pageSize]="pageSize"
      [boundaryLinks]="true"
      (pageChange)="onPageChange()"
      [collectionSize]="totalItems">
    </ngb-pagination>
  </div>
</div>


<ng-template #noResults>
  <h1 class="text-center">No results to show</h1>
</ng-template>
